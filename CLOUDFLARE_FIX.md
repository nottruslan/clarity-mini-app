# Инструкция по исправлению белого экрана на claritybot.ru

## Проблема
Сайт показывает белый экран вместо приложения.

## Шаги для исправления

### 1. Очистка кеша Cloudflare

1. Зайдите в Cloudflare Dashboard → выберите домен `claritybot.ru`
2. Перейдите в раздел **Caching** → **Configuration**
3. Нажмите кнопку **"Purge Everything"** (Очистить всё)
4. Подтвердите очистку кеша

### 2. Проверка режима SSL/TLS

1. В Cloudflare Dashboard перейдите в **SSL/TLS** → **Overview**
2. Убедитесь, что выбран режим **"Full"** (не "Flexible" и не "Full (strict)")
3. Если режим другой - измените на **"Full"**

### 3. Проверка настроек кеширования

1. Перейдите в **Caching** → **Configuration**
2. Убедитесь, что **"Caching Level"** установлен на **"Standard"**
3. В разделе **Browser Cache TTL** выберите **"Respect Existing Headers"** или **"4 hours"**

### 4. Проверка DNS записей

1. Перейдите в **DNS** → **Records**
2. Убедитесь, что обе CNAME записи имеют **оранжевое облако** (Proxied):
   - `claritybot.ru` → `clarityminiapp.netlify.app` (Proxied)
   - `www` → `clarityminiapp.netlify.app` (Proxied)

### 5. Пересборка и деплой проекта

После обновления `vite.config.ts` нужно пересобрать проект:

```bash
npm run build
npm run deploy
```

Или если используете автоматический деплой через Git:
```bash
git add .
git commit -m "Fix: Update vite config for Cloudflare proxy"
git push
```

### 6. Проверка в браузере

1. Откройте https://claritybot.ru/ в режиме инкогнито (чтобы избежать кеша браузера)
2. Откройте Developer Tools (F12)
3. Перейдите на вкладку **Console** и проверьте наличие ошибок
4. Перейдите на вкладку **Network** и проверьте:
   - Загружаются ли файлы `/assets/index-*.js` и `/assets/index-*.css`
   - Какие HTTP статусы возвращаются (должны быть 200)
   - Нет ли ошибок CORS

### 7. Дополнительные проверки

Если проблема сохраняется:

1. **Проверьте статус деплоя в Netlify:**
   - Зайдите в Netlify Dashboard
   - Проверьте, что последний деплой успешен
   - Убедитесь, что файлы в `dist/` корректны

2. **Временно отключите прокси Cloudflare:**
   - В DNS записях переключите оранжевое облако на серое (DNS only)
   - Проверьте, открывается ли сайт напрямую через Netlify домен
   - Если да - проблема в настройках Cloudflare
   - Если нет - проблема в деплое Netlify

3. **Проверьте логи Netlify:**
   - В Netlify Dashboard → **Functions** → **Logs**
   - Проверьте наличие ошибок

## Типичные ошибки и решения

### Ошибка: "Failed to load resource: net::ERR_FAILED"
- **Причина:** Проблема с SSL сертификатом или проксированием
- **Решение:** Проверьте режим SSL/TLS в Cloudflare (должен быть "Full")

### Ошибка: "CORS policy: No 'Access-Control-Allow-Origin' header"
- **Причина:** Проблема с CORS заголовками
- **Решение:** В Cloudflare → **Rules** → **Transform Rules** добавьте заголовки CORS

### Ошибка: "404 Not Found" для ассетов
- **Причина:** Неправильные пути к файлам
- **Решение:** Убедитесь, что в `vite.config.ts` указан `base: '/'`

## После исправления

После выполнения всех шагов:
1. Подождите 5-10 минут для распространения изменений
2. Очистите кеш браузера (Ctrl+Shift+Delete)
3. Проверьте сайт в режиме инкогнито
4. Проверьте консоль браузера на наличие ошибок

